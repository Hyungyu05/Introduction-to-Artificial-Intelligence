# 📈 Quant Agent v2

**인공지능개론** 수업의 일환으로 개발된 **로컬 LLM 기반 퀀트 투자 분석 에이전트**입니다.
이 프로젝트는 기술적 분석(차트), 뉴스 감성(텍스트), 펀더멘털(재무제표) 데이터를 종합하여 전문적인 투자 리포트를 자동으로 생성합니다.

## 🚀 프로젝트 개요 (Overview)

* **목표:** 서로 다른 형태의 이종 데이터(시계열, 텍스트, 재무 데이터)를 결합하여 주식 분석 프로세스를 자동화합니다.
* **핵심 로직:** 결정론적(Deterministic)인 3단계 분석 파이프라인과 LLM의 추론 능력을 결합했습니다.
* **분석 대상:** 주요 기술주 (AAPL, TSLA, GOOGL, META)

## 🛠️ 기술 스택 (Tech Stack)

* **Language:** Python 3.10
* **AI Engine:** Ollama (Gemma2:2b) - *On-premise / Local Environment*
* **Database:** DuckDB (OLAP 최적화 인메모리 DB)
* **Framework:** Hydra (설정 관리), Streamlit (웹 UI)
* **Data Sources:** Polygon.io (주가/뉴스), Financial Modeling Prep (재무제표)

## ✨ 핵심 기능 (Key Features)

1.  **하이브리드 분석 아키텍처 (Hybrid Analysis)**
    * **Technical:** `pandas-ta`를 활용한 추세 및 모멘텀 분석 (RSI, 이동평균선).
    * **Sentiment:** 뉴스 헤드라인을 LLM에 주입하여 시장 심리(긍정/부정) 추출.
    * **Fundamental:** 복잡한 재무제표 JSON 데이터를 파싱하여 건전성 지표(PER, ROE 등) 평가.

2.  **Pure Python 구현 (No LangChain)**
    * LangChain이나 LangGraph 같은 무거운 오케스트레이션 프레임워크를 사용하지 않고, **자체 에이전트 워크플로우**를 설계했습니다.
    * 이를 통해 실행 속도를 최적화하고, 프롬프트 엔지니어링 과정을 100% 제어할 수 있습니다.

3.  **로컬 LLM 통합 (Local LLM)**
    * Ollama를 통해 외부 API 비용 없이, 데이터 유출 걱정 없는 안전한 분석 환경을 구축했습니다.

## 📖 사용 방법 (How to Use)

시스템이 실행되면 다음과 같은 흐름으로 분석을 진행할 수 있습니다.

### 1. 웹 UI 모드 (Streamlit) - 권장

터미널에 `streamlit run app.py`를 입력하여 웹 인터페이스를 실행합니다.

1.  **종목 입력:**
    * 하단 채팅창에 분석하고 싶은 기업을 입력합니다.
    * **입력 예시:**
        * "테슬라 분석해줘"
        * "애플 어때?"
        * "GOOGL"
    * *지원 종목: AAPL (애플), TSLA (테슬라), GOOGL (구글), META (메타)*

2.  **분석 진행 상황 확인:**
    * 입력 즉시 **'데이터 분석 중...'** 상태창이 나타납니다.
    * 데이터베이스 조회 → 차트 생성 → 3단계(기술/감성/재무) 분석 → LLM 리포트 생성 과정을 실시간으로 볼 수 있습니다.

3.  **결과 확인:**
    * **상단 차트:** 최근 주가 흐름과 기술적 지표를 시각적으로 확인합니다.
    * **분석 리포트:** AI 에이전트가 작성한 종합 투자 리포트를 읽습니다. (매수/매도/관망 의견 포함)
    * **세부 데이터 (Optional):** 리포트 하단의 `🔎 원본 데이터 및 세부 지표 보기`를 클릭하면, AI가 분석에 사용한 실제 수치와 뉴스 헤드라인을 검증할 수 있습니다.

### 2. 터미널 모드 (CLI)

터미널에 `python main.py`를 입력하여 텍스트 기반으로 빠르게 실행합니다.

1.  프로그램이 시작되면 `💬 질문이나 종목을 입력하세요:` 프롬프트가 뜹니다.
2.  분석할 티커나 질문을 입력하고 Enter를 누릅니다.
3.  분석 과정 로그가 출력된 후, 최종 리포트가 텍스트로 출력됩니다.

---

### 💡 팁 (Tips)

* **데이터 최신화:** 분석 전 `python scripts/setup_data.py`를 실행하면 가장 최신 데이터로 분석할 수 있습니다.
* **API 키 에러 시:** FMP API 키 문제로 재무 데이터 수집이 실패하더라도, 시스템은 멈추지 않고 **Mock Data(임시 데이터) 모드**로 전환되어 분석을 완료합니다.



    end
    
    LLM --> Report[최종 투자 리포트]
